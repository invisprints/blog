{
  
    
        "post0": {
            "title": "LSTM 模型预测 A 股走势",
            "content": "LSTM &#27169;&#22411;&#39044;&#27979; A &#32929;&#36208;&#21183; . 这几天闲来无事，看网上很多人都在评论股市的起起伏伏，于是心血来潮，想用深度学习看看能否预测股票走势。由于之前研究方向都是 CV 和 NAS，也想借用这个机会深入了解下 RNN 这个派系是怎么回事。 . 数日后 . . 经过我多日的观察，LSTM 似乎并不能预测 A 股走势。当然由于我在这方面还是初学者，所以代码有可能存在问题，欢迎大家指出！ . &#19979;&#36733;&#25968;&#25454;&#38598; . 证券宝 www.baostock.com 是一个免费、开源的证券数据平台（无需注册）。其优点请访问官网 . 取消下面代码注释来安装 baostock 库 . # !pip install baostock -i https://pypi.tuna.tsinghua.edu.cn/simple/ --trusted-host pypi.tuna.tsinghua.edu.cn . 按照官网教程下载一只股票的k线数据，这里取sz.002648 15年以后的数据。 . import baostock as bs import pandas as pd #### 登陆系统 #### lg = bs.login() #### 获取沪深A股历史K线数据 #### # 详细指标参数，参见“历史行情指标参数”章节；“分钟线”参数与“日线”参数不同。 # 分钟线指标：date,time,code,open,high,low,close,volume,amount,adjustflag rs = bs.query_history_k_data_plus(&quot;sz.002648&quot;, &quot;date,code,open,high,low,close,preclose,volume,amount,adjustflag,turn,tradestatus,pctChg,isST&quot;, start_date=&#39;2015-01-01&#39;, end_date=&#39;2020-4-14&#39;, frequency=&quot;d&quot;, adjustflag=&quot;3&quot;) #### 打印结果集 #### data_list = [] while (rs.error_code == &#39;0&#39;) &amp; rs.next(): # 获取一条记录，将记录合并在一起 data_list.append(rs.get_row_data()) df = pd.DataFrame(data_list, columns=rs.fields) #### 结果集输出到csv文件 #### # result.to_csv(&quot;D: history_A_stock_k_data.csv&quot;, index=False) print(df) #### 登出系统 #### bs.logout() . login success! date code open high low close preclose 0 2015-01-05 sz.002648 12.0400 12.4700 11.8000 12.2200 12.1000 1 2015-01-06 sz.002648 12.2000 12.3600 12.0000 12.2900 12.2200 2 2015-01-07 sz.002648 12.2900 12.5600 12.2500 12.4000 12.2900 3 2015-01-08 sz.002648 12.4300 12.6300 12.3000 12.4700 12.4000 4 2015-01-09 sz.002648 12.4600 12.7400 12.3900 12.4100 12.4700 ... ... ... ... ... ... ... ... 1281 2020-04-08 sz.002648 13.7400 14.1200 13.6500 13.9700 13.8400 1282 2020-04-09 sz.002648 14.0800 14.2900 14.0300 14.1800 13.9700 1283 2020-04-10 sz.002648 14.0500 14.0500 13.5400 13.7600 14.1800 1284 2020-04-13 sz.002648 14.1900 15.1400 14.0000 14.9600 13.7600 1285 2020-04-14 sz.002648 15.0600 15.2000 14.8000 14.8900 14.9600 volume amount adjustflag turn tradestatus pctChg 0 16718083 201474357.0000 3 2.089760 1 0.991700 1 7965196 97122442.0000 3 0.995649 1 0.572800 2 7684398 95370790.0000 3 0.960550 1 0.895000 3 8056201 100447582.0000 3 1.007025 1 0.564500 4 7648582 96383568.0000 3 0.956073 1 -0.481200 ... ... ... ... ... ... ... 1281 15477705 214734917.0800 3 1.490800 1 0.939300 1282 16011717 226975113.8300 3 1.542300 1 1.503200 1283 17320147 238855999.3500 3 1.669400 1 -2.961900 1284 56552045 834440561.6200 3 5.450700 1 8.720900 1285 42736530 638906444.8700 3 4.119100 1 -0.467900 isST 0 0 1 0 2 0 3 0 4 0 ... ... 1281 0 1282 0 1283 0 1284 0 1285 0 [1286 rows x 14 columns] logout success! . &lt;baostock.data.resultset.ResultData at 0x11cdb33d0&gt; . 下载的数据都是以字符串形式保存的，我们把需要的数据转换成整数和浮点数 . float_type = [&#39;open&#39;,&#39;high&#39;,&#39;low&#39;,&#39;close&#39;,&#39;preclose&#39;,&#39;amount&#39;,&#39;pctChg&#39;] for item in float_type: df[item] = df[item].astype(&#39;float&#39;) df[&#39;amount&#39;] = df[&#39;amount&#39;].astype(&#39;int&#39;) df[&#39;volume&#39;] = df[&#39;volume&#39;].astype(&#39;int&#39;) df[&#39;turn&#39;] = [0 if x == &quot;&quot; else float(x) for x in df[&quot;turn&quot;]] df[&#39;buy_flag&#39;] = 10 # df.tail() . &#22788;&#29702;&#25968;&#25454;&#38598; . 用 LSTM 预测价格显示是不合理的，因为价格的波动非常不可控，所以我们退而求其次，预测股票的走势，即涨还是跌。 . 但是怎么量化股票的涨跌是个问题，本人之前完全没接触过股票，所以这里就想当然用未来数天的平均股价表示股票的起伏。 . #未来n天移动平均，包含今天 def MA_next(df, date_idx, price_type, n): return df[price_type][date_idx:date_idx+n].mean() . 假设短期2天，中期6天，长期15天。如果未来15天平均价格大于未来6天平均价格大于未来2天平均价格，我们就可认为未来15天的股市走势很好。 这里还要求有3%的涨幅，能一定程度上减少标签频繁波动。 . &#39;2&#39;含义为买入，&#39;0&#39;含义为卖出，&#39;1&#39;为默认值 . s_time = 2 m_time = 6 l_time = 15 for i in range(len(df)-l_time): if MA_next(df,i,&#39;close&#39;,l_time)&gt;MA_next(df,i,&#39;close&#39;,m_time)*1.03&gt;MA_next(df,i,&#39;close&#39;,s_time)*1.03: df.loc[i, &#39;buy_flag&#39;] = 2 elif MA_next(df,i,&#39;close&#39;,s_time)&gt;MA_next(df,i,&#39;close&#39;,m_time): df.loc[i, &#39;buy_flag&#39;] = 0 else: df.loc[i, &#39;buy_flag&#39;] = 1 df.loc[i, &#39;buy_flag&#39;] = 1 + (MA_next(df,i,&#39;close&#39;,m_time)-MA_next(df,i,&#39;close&#39;,s_time))/MA_next(df,i,&#39;close&#39;,s_time) # df.loc[i, &#39;buy_flag&#39;] = 10*(MA_next(df,i,&#39;close&#39;,m_time)+MA_next(df,i,&#39;close&#39;,l_time)-2*MA_next(df,i,&#39;close&#39;,s_time))/MA_next(df,i,&#39;close&#39;,s_time) df.tail() . date code open high low close preclose volume amount adjustflag turn tradestatus pctChg isST buy_flag . 1281 2020-04-08 | sz.002648 | 13.74 | 14.12 | 13.65 | 13.97 | 13.84 | 15477705 | 214734917 | 3 | 1.4908 | 1 | 0.9393 | 0 | 10.0 | . 1282 2020-04-09 | sz.002648 | 14.08 | 14.29 | 14.03 | 14.18 | 13.97 | 16011717 | 226975113 | 3 | 1.5423 | 1 | 1.5032 | 0 | 10.0 | . 1283 2020-04-10 | sz.002648 | 14.05 | 14.05 | 13.54 | 13.76 | 14.18 | 17320147 | 238855999 | 3 | 1.6694 | 1 | -2.9619 | 0 | 10.0 | . 1284 2020-04-13 | sz.002648 | 14.19 | 15.14 | 14.00 | 14.96 | 13.76 | 56552045 | 834440561 | 3 | 5.4507 | 1 | 8.7209 | 0 | 10.0 | . 1285 2020-04-14 | sz.002648 | 15.06 | 15.20 | 14.80 | 14.89 | 14.96 | 42736530 | 638906444 | 3 | 4.1191 | 1 | -0.4679 | 0 | 10.0 | . &#21487;&#35270;&#21270; . 使用 plotly 绘图 . import plotly.graph_objects as go # from IPython.display import HTML import chart_studio.plotly as py fig = go.Figure(data=[go.Candlestick(x=df[&#39;date&#39;], open=df[&#39;open&#39;], high=df[&#39;high&#39;], low=df[&#39;low&#39;], close=df[&#39;close&#39;], increasing_line_color= &#39;red&#39;, decreasing_line_color= &#39;green&#39;) ]) fig.add_trace(go.Scatter(x=df[&#39;date&#39;],y=df[&#39;buy_flag&#39;], name=&#39;Flag&#39;)) fig.update_layout( xaxis_range=[&#39;2017-01-01&#39;,&#39;2019-12-31&#39;], yaxis_title=&#39;Price&#39;, # xaxis_rangeslider_visible=False, ) py.iplot(fig, filename=&quot;stock-price&quot;) . 在 Fast.ai Part 1 课程中，提到一个能扩展日期特征的函数add_datepart，该函数能计算当前日期的年、月、日、一周第几天、周数、月初月末、一年当中的第几天等信息。我们用该函数扩展日期特征。 . # 增加日期特征 from fastai.tabular import * add_datepart(df, &quot;date&quot;, drop=False) seq_length = 90 train_df = df[seq_length:-seq_length] # 丢掉不重要的特征 train_df = train_df.drop([&#39;date&#39;,&#39;code&#39;,&#39;Is_month_end&#39;, &#39;Is_month_start&#39;, &#39;Is_quarter_end&#39;, &#39;Is_quarter_start&#39;, &#39;Is_year_end&#39;, &#39;Is_year_start&#39;,&#39;Dayofyear&#39;],axis=1) train_df . open high low close preclose volume amount adjustflag turn tradestatus pctChg isST buy_flag Year Month Week Day Dayofweek Elapsed . 90 16.15 | 16.85 | 16.07 | 16.28 | 16.19 | 20654461 | 340943328 | 3 | 2.581808 | 1 | 0.5559 | 0 | 2.000000 | 2015 | 5 | 21 | 20 | 2 | 1432080000 | . 91 16.45 | 16.84 | 16.30 | 16.81 | 16.28 | 21049050 | 349775744 | 3 | 2.631131 | 1 | 3.2555 | 0 | 2.000000 | 2015 | 5 | 21 | 21 | 3 | 1432166400 | . 92 16.91 | 17.50 | 16.72 | 17.25 | 16.81 | 26445834 | 455184800 | 3 | 3.305729 | 1 | 2.6175 | 0 | 2.000000 | 2015 | 5 | 21 | 22 | 4 | 1432252800 | . 93 17.20 | 17.72 | 16.93 | 17.52 | 17.25 | 25543119 | 444374592 | 3 | 3.192890 | 1 | 1.5652 | 0 | 1.070076 | 2015 | 5 | 22 | 25 | 0 | 1432512000 | . 94 17.78 | 17.82 | 17.26 | 17.68 | 17.52 | 23197897 | 407829184 | 3 | 2.899737 | 1 | 0.9132 | 0 | 1.031780 | 2015 | 5 | 22 | 26 | 1 | 1432598400 | . ... ... | ... | ... | ... | ... | ... | ... | ... | ... | ... | ... | ... | ... | ... | ... | ... | ... | ... | ... | . 1191 14.22 | 14.35 | 13.77 | 13.86 | 14.10 | 13857446 | 193912775 | 3 | 1.334800 | 1 | -1.7021 | 0 | 1.014370 | 2019 | 11 | 47 | 22 | 4 | 1574380800 | . 1192 13.92 | 14.62 | 13.91 | 14.44 | 13.86 | 33019563 | 474715627 | 3 | 3.180500 | 1 | 4.1847 | 0 | 1.012324 | 2019 | 11 | 48 | 25 | 0 | 1574640000 | . 1193 14.47 | 14.56 | 14.23 | 14.23 | 14.44 | 14896110 | 213625282 | 3 | 1.434800 | 1 | -1.4543 | 0 | 1.028050 | 2019 | 11 | 48 | 26 | 1 | 1574726400 | . 1194 14.18 | 14.54 | 14.01 | 14.29 | 14.23 | 16550049 | 236702541 | 3 | 1.594100 | 1 | 0.4216 | 0 | 1.031558 | 2019 | 11 | 48 | 27 | 2 | 1574812800 | . 1195 14.28 | 14.76 | 14.21 | 14.44 | 14.29 | 16324504 | 236742107 | 3 | 1.572400 | 1 | 1.0497 | 0 | 1.021047 | 2019 | 11 | 48 | 28 | 3 | 1574899200 | . 1106 rows × 19 columns . 接下来我们为数据生成序列，用前seq_length天的信息作为输入序列，后1天的股市起伏buy_flag作为标签 . def sliding_windows(data, label, seq_length): x = [] y = [] for i in range(len(data)-seq_length-1): _x = data[i:(i+seq_length)] _y = label[i+seq_length] x.append(_x) y.append(_y) return np.array(x),np.array(y) . 在 Pytorch 中，LSTM 默认的输入顺序是 seq_length*batch_size*feature，而我们通常生成的序列是batch_size*seq_length*feature，因此需要交换下输入数据纬度。 . from sklearn.preprocessing import MinMaxScaler import numpy as np y_scaler = MinMaxScaler() x_scaler = MinMaxScaler() #converting dataset into x_train and y_train X = train_df.drop([&#39;buy_flag&#39;],axis=1).values X = x_scaler.fit_transform(X) Y = train_df[&#39;buy_flag&#39;] Y = np.array(Y).reshape(-1,1) Y = y_scaler.fit_transform(Y) x, y = sliding_windows(X, Y, seq_length) y_train,y_test = y[:int(y.shape[0]*0.8)],y[int(y.shape[0]*0.8):] x_train,x_test = x[:int(x.shape[0]*0.8)],x[int(x.shape[0]*0.8):] # lstm: seq, batch, feature device = torch.device(&quot;cuda:0&quot; if torch.cuda.is_available() else &quot;cpu&quot;) dataX = torch.Tensor(x.transpose(1,0,2)) dataY = torch.Tensor(y) trainX = torch.Tensor(x_train.transpose(1,0,2)) trainY = torch.Tensor(y_train) testX = torch.Tensor(x_test.transpose(1,0,2)) testY = torch.Tensor(y_test) trainX.shape, trainY.shape . (torch.Size([90, 812, 18]), torch.Size([812, 1])) . &#24314;&#31435; LSTM &#27169;&#22411; . class LSTM(nn.Module): def __init__(self, num_classes, input_size, hidden_size, num_layers): super(LSTM, self).__init__() self.num_classes = num_classes self.num_layers = num_layers self.input_size = input_size self.hidden_size = hidden_size self.seq_length = seq_length self.lstm = nn.LSTM(input_size=input_size, hidden_size=hidden_size, num_layers=num_layers) self.fc = nn.Linear(hidden_size, num_classes) def forward(self, x): # 不手动指定 h 和 c 的话，默认就是 0 # h_0 = torch.zeros( # self.num_layers, x.size(0), self.hidden_size) # c_0 = torch.zeros( # self.num_layers, x.size(0), self.hidden_size) # Propagate input through LSTM # ula, (h_out, _) = self.lstm(x, (h_0, c_0)) ula, (h_out, _) = self.lstm(x) h_out = h_out.view(-1, self.hidden_size) out = self.fc(h_out) return out . &#35757;&#32451;&#27169;&#22411; . num_epochs = 15 learning_rate = 0.001 input_size = train_df.shape[1]-1 # The number of expected features in the input x hidden_size = 300 # The number of features in the hidden state h num_layers = 1 # Number of recurrent layers. num_classes = 1 # output lstm = LSTM(num_classes, input_size, hidden_size, num_layers) criterion = torch.nn.MSELoss() # mean-squared error for regression optimizer = torch.optim.Adam(lstm.parameters(), lr=learning_rate) #optimizer = torch.optim.SGD(lstm.parameters(), lr=learning_rate) # Train the model lstm.train() lstm.to(device) trainX = trainX.to(device) for epoch in range(num_epochs): optimizer.zero_grad() outputs = lstm(trainX) # obtain the loss function loss = criterion(outputs, trainY) loss.backward() optimizer.step() print(&quot;Epoch: %d, loss: %1.5f&quot; % (epoch, loss.item())) . Epoch: 0, loss: 0.22898 Epoch: 1, loss: 0.17325 Epoch: 2, loss: 0.14031 Epoch: 3, loss: 0.13380 Epoch: 4, loss: 0.14764 Epoch: 5, loss: 0.14571 Epoch: 6, loss: 0.13712 Epoch: 7, loss: 0.13153 Epoch: 8, loss: 0.12988 Epoch: 9, loss: 0.13052 Epoch: 10, loss: 0.13184 Epoch: 11, loss: 0.13284 Epoch: 12, loss: 0.13308 Epoch: 13, loss: 0.13251 Epoch: 14, loss: 0.13131 . &#26597;&#30475;&#35757;&#32451;&#25928;&#26524; . # 将数据集中的所有切片以序列的方式进行预测，查看预测结果与真实值的拟合情况。 import plotly.graph_objects as go lstm.eval() lstm.to(torch.device(&#39;cpu&#39;)) with torch.no_grad(): dataY_pred = lstm(dataX) dataY_pred = dataY_pred.data.numpy() dataY_truth = dataY.data.numpy() dataY_pred = y_scaler.inverse_transform(dataY_pred) dataY_truth = y_scaler.inverse_transform(dataY_truth) fig = go.Figure(go.Scatter(y=dataY_truth.flatten(),name=&#39;Ground Truth&#39;)) fig.add_trace(go.Scatter(y=dataY_pred.flatten(),name=&#39;Predicted&#39;)) fig.update_layout( shapes = [dict( x0=len(x_train), x1=len(x_train), y0=0, y1=1, xref=&#39;x&#39;, yref=&#39;paper&#39;, line_width=2)], #在图上划分训练集和测试集 xaxis_rangeslider_visible=True, ) py.iplot(fig, filename=&quot;stock-result&quot;) . 发现预测值基本取标签的平均值，也就是说它并不会根据输入调整输出，而是直接输出标签的平均值，没有任何参考价值 . #随机从测试集中抽取一个单一数据切片进行预测 import random i = random.randint(0,testX.shape[1]) with torch.no_grad(): y_pred = lstm(testX[:,i,::].reshape(testX.shape[0],1,testX.shape[2])) print(&#39;预测值:{0}, 实际值:{1}&#39;.format(y_pred.data.numpy(),testY[i].reshape(-1,1))) . 预测值:[[0.288591]], 实际值:tensor([[1.]]) . &#21442;&#32771;&#36164;&#26009; . 超生动图解LSTM和GPU，一文读懂循环神经网络！ . LSTM细节分析理解（pytorch版） .",
            "url": "https://invisprints.github.io/blog/pytorch/stock/lstm/2020/04/17/LSTM-stock.html",
            "relUrl": "/pytorch/stock/lstm/2020/04/17/LSTM-stock.html",
            "date": " • Apr 17, 2020"
        }
        
    
  
    
        ,"post1": {
            "title": "subconverter 实用案例",
            "content": "subconverter . subconverter 是在各种订阅格式之间进行转换的实用程序 . github 项目地址 . 公共 API . 常用案例 . 关于 subconverter 的用法在 readme 中已经给出详细的说明与部分简单用法了，本文将继续扩充一些 readme 中没有涉及到的 example。 . 云端运行 . readme 中介绍了大量本地运行的情况，但是对于众多用户来说我们并不希望在本地一直运行着 subconverter，我们希望有个云端 API。每当我们更新云端数据时，所有的更新就会自动 update 到我们的手机、电脑、路由器中，十分方便。 . 最简单的方法是使用公共 API，但有些人担心隐私机场泄漏问题，因此我们需要自己搭建一个云端转换器。 . Heroku 是一个在云端部署 web app 的平台，它托管于 Amazon 云且与 Github 深度集成。 subconverter 作者也提供了一键部署到 Herokuapp 的模版 heroku-subconverter，这里你可以一键部署到你的 Heroku 平台上，然后就可以使用 subconverter readme 中的简易用法。 . 但简易用法的链接通常十分冗长且难以记忆，在出现这种情况后，我们就需要利用 subconverter 提供的配置档案简化操作 . . step 1 既然需要用到配置档案，我们自然就不能使用 heroku 一键部署的功能（不然怎么添加本地文件？）。在heroku-subconverter页面，点击 use this template 将该模版 copy 自己的仓库下，这里建议将仓库权限设置为 Private，不然全世界人们都可以看见你的配置档案了。 . step 2 所有的配置档案都应保存在 base 文件夹中。但目前该版本51f4b54不支持 base 中包含其它子文件夹，如果你希望在里面添加其它子文件夹，需要修改 Dockerfile 中COPY base/* /base/成COPY base/ /base/ . step 3 根据你的喜好在 base 中添加相应的配置档案。 配置档案参照subconverter 说明进行配置。 . . 建议在本地调试好后再上传云端。 step 4 在 heroku 中关联你的 GitHub 账户。新建 app 后将此 app 关联到你在 step 1 中新建的仓库，这样你有什么修改都能轻松同步到 heroku 中。 进行完相关设置后点击 deploy，不一会儿你将用有云端转换程序。 . step 5 至此部署云端 API 基本完成，这里有几个注意事项。 . 云端的根目录就是 base 目录。比如你在 base 下有一个example_profile.ini配置文件，路径就是https://***.herokuapp.com/getprofile?name=example_profile.ini&amp;token=*** | 需修改你在pref.ini的managed_config_prefix路径，将其指向云端路径 | 为了安全考虑，建议修改token默认密码 | 订阅时直接在订阅链接里输入云端 API 地址即可，如https://***.herokuapp.com/getprofile?name=example_profile.ini&amp;token=*** | 你可以建立多个配置文件，让不同软件使用不同配置文件。 | . 自定义规则 . 在 subconverter 说明文档中对自定义规则有少许描述，这里给出一个完整的自定义规则配置过程。 subconverter 的默认配置规则为神机规则，里面包含了大量与广告相关的规则。下面我们就以去除神机规则中的广告拦截规则为例。 . 在配置档案中，我们可以通过添加config参数加载额外的配置文件。当然我们也可以通过直接修改 pref.ini 实现。 . [Profile] target=clash url=ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpwYXNzd29yZA@www.example.com:1080#Example ; 加载位于 config/example_external_config.ini 的配置文件 config=config/example_external_config.ini . 仿照默认的配置文件编辑自定义配置文件，默认配置文件在pref.ini由surge_ruleset和custom_proxy_group指出 . [custom] ; 自定义策略组 custom_proxy_group=🔰 节点选择`select`[]♻️ 自动选择`[]🎯 全球直连`.* custom_proxy_group=♻️ 自动选择`url-test`.*`http://www.gstatic.com/generate_204`300 custom_proxy_group=🌍 国外媒体`select`[]🔰 节点选择`[]♻️ 自动选择`[]🎯 全球直连`.* custom_proxy_group=🌏 国内媒体`select`[]🎯 全球直连`[]🔰 节点选择 custom_proxy_group=Ⓜ️ 微软服务`select`[]🎯 全球直连`[]🔰 节点选择`.* custom_proxy_group=📲 电报信息`select`[]🔰 节点选择`[]🎯 全球直连`.* custom_proxy_group=🍎 苹果服务`select`[]🔰 节点选择`[]🎯 全球直连`[]♻️ 自动选择`.* custom_proxy_group=🎯 全球直连`select`[]DIRECT custom_proxy_group=🐟 漏网之鱼`select`[]🎯 全球直连`[]🔰 节点选择`[]♻️ 自动选择`.* ;Options for custom rulesets ; 自定义规则片段 enable_rule_generator=true overwrite_original_rules=false surge_ruleset=🎯 全球直连,rules/LocalAreaNetwork.list surge_ruleset=Ⓜ️ 微软服务,rules/MSServices.list surge_ruleset=🎯 全球直连,rules/ConnersHua/Surge/Ruleset/Unbreak.list surge_ruleset=🌍 国外媒体,rules/ConnersHua/Surge/Ruleset/GlobalMedia.list surge_ruleset=🌏 国内媒体,rules/lhie1/Surge/Surge 3/Provider/AsianTV.list surge_ruleset=📲 电报信息,rules/ConnersHua/Surge/Ruleset/Telegram.list surge_ruleset=🔰 节点选择,rules/ConnersHua/Surge/Ruleset/Global.list surge_ruleset=🍎 苹果服务,rules/ConnersHua/Surge/Ruleset/Apple.list surge_ruleset=🎯 全球直连,rules/ConnersHua/Surge/Ruleset/China.list surge_ruleset=🎯 全球直连,rules/NobyDa/Surge/Download.list surge_ruleset=🎯 全球直连,[]GEOIP,CN surge_ruleset=🐟 漏网之鱼,[]FINAL . 至此在调用配置档案时，会调用自定义配置档案并覆盖掉原始配置档案。 . 小结 . subconverter 还有很多高级玩法，这篇文章只是抛砖引玉补充一些基础自定义案例，方便读者了解部分高级 API 的使用。 . 最近 subconverter 0.5 引入强大的模版功能，但同样缺少完整的使用教程。由于笔者精力有限+上述功能已满足自身需要，因此暂不研究如何使用模版。 .",
            "url": "https://invisprints.github.io/blog/subconverter/heroku/2020/04/12/subconverter-example.html",
            "relUrl": "/subconverter/heroku/2020/04/12/subconverter-example.html",
            "date": " • Apr 12, 2020"
        }
        
    
  
    
        ,"post2": {
            "title": "更新 fastpages 框架",
            "content": "fastpages . fastpages 是一个在开发中的博客平台，因此会不断有新功能出现或修复现有的bug。fastpages 提供了 2 种更新方法，适用于新手的自动化更新和适用于自定义玩家的手动更新。 . 本文参考 Upgrading fastpages . 自动更新 . . Important: 自动更新适合那些没有修改网站 HTML 的博客。 第一步：使用 Upgrade Template 提出 Issue . 在你的博客 repo 中点击 New issue，并点击显示 [fastpages] Automated Upgrade 的 Get Started 按钮。 . 第二步: 点击 Submit new issue 按钮 . 不要对页面做任何改动 . 第三步: 查看自动生成的 PR . 接下来 GitHub 会打开 PR 自动更新，PR 界面如下 . 此时可能会报 error，通常的原因有如下几点： . - 已是最新版，error 上会显示 &quot;nothing to commit&quot;. - 之前有未合并的自动更新 PR 请求 . 你可以在 fastai 社区 提问。 . 第四步: 检查并合并 PR . 仔细检查 PR 中修改的文件，确保你自定义的部分没有被修改。之后点击Merge pull request 更新 fastpages。 | 如果 PR 中修改了你自定义的部分或不想被改动的部分，请采用手动更新。 | . 手动更新 . . 手动更新适合那些修改过网站 HTML 的博客。 直接在 GitHub 网页上修改 . 进行到自动更新的第四步之后，如果你发现 PR 中修改了你不想修改的内容，可以直接在 Files changed 标签页中修改 PR 内容，修改完成后等待 GitHub 冲突检查，解决完可能存在的冲突或失败之后就可以点击Merge pull request 更新 fastpages。 . clone 到本地解决 . 参考 GitHub - Pull changes from a template repository 和 How to sync fastai/fastpages with forked FastPages . 第一步 . 添加远程模版库 . $ git remote add template git@github.com:fastai/fastpages.git $ git remote -v origin git@github.com:byteshiva/blog.git (fetch) origin git@github.com:byteshiva/blog.git (push) template git@github.com:fastai/fastpages.git (fetch) template git@github.com:fastai/fastpages.git (push) upstream git@github.com:fastai/fastpages.git (fetch) upstream git@github.com:fastai/fastpages.git (push) . 第二步 . 更新 . $ git fetch --all Fetching origin remote: Enumerating objects: 43, done. remote: Counting objects: 100% (43/43), done. remote: Compressing objects: 100% (11/11), done. remote: Total 26 (delta 9), reused 24 (delta 7), pack-reused 0 Unpacking objects: 100% (26/26), done. From github.com:byteshiva/blog d7e8201..b67202a gh-pages -&gt; origin/gh-pages Fetching upstream remote: Enumerating objects: 86, done. remote: Counting objects: 100% (86/86), done. remote: Compressing objects: 100% (54/54), done. remote: Total 86 (delta 38), reused 64 (delta 27), pack-reused 0 Unpacking objects: 100% (86/86), done. From github.com:fastai/fastpages e8bf9f8..bcdbc22 gh-pages -&gt; upstream/gh-pages 5b4b79e..8f5a7bc master -&gt; upstream/master Fetching template From github.com:fastai/fastpages * [new branch] change-docker -&gt; template/change-docker * [new branch] gh-pages -&gt; template/gh-pages * [new branch] master -&gt; template/master * [new branch] pin-jekyll-version -&gt; template/pin-jekyll-version * [new branch] search-highlight -&gt; template/search-highlight . 第三步 . 合并 . $ git merge template/master fatal: refusing to merge unrelated histories . 如果出现 fatal: refusing to merge unrelated histories，则需要允许不关联的git 历史，参照第四步 . 第四步 . $ git merge template/master --allow-unrelated-histories CONFLICT (add/add): Merge conflict in index.md Auto-merging index.md CONFLICT (add/add): Merge conflict in assets/main.scss Auto-merging assets/main.scss CONFLICT (add/add): Merge conflict in assets/js/search.js Auto-merging assets/js/search.js CONFLICT (add/add): Merge conflict in _posts/2020-01-14-test-markdown-post.md Auto-merging _posts/2020-01-14-test-markdown-post.md CONFLICT (add/add): Merge conflict in _notebooks/2020-02-20-test.ipynb Auto-merging _notebooks/2020-02-20-test.ipynb CONFLICT (add/add): Merge conflict in _includes/youtube.html Auto-merging _includes/youtube.html CONFLICT (add/add): Merge conflict in _includes/twitter.html Auto-merging _includes/twitter.html CONFLICT (add/add): Merge conflict in _includes/notebook_github_link.html Auto-merging _includes/notebook_github_link.html CONFLICT (add/add): Merge conflict in _includes/notebook_colab_link.html Auto-merging _includes/notebook_colab_link.html CONFLICT (add/add): Merge conflict in _includes/favicons.html Auto-merging _includes/favicons.html CONFLICT (add/add): Merge conflict in _config.yml Auto-merging _config.yml CONFLICT (add/add): Merge conflict in _action_files/settings.ini Auto-merging _action_files/settings.ini CONFLICT (add/add): Merge conflict in _action_files/nb2post.py Auto-merging _action_files/nb2post.py CONFLICT (add/add): Merge conflict in _action_files/action_entrypoint.sh Auto-merging _action_files/action_entrypoint.sh CONFLICT (add/add): Merge conflict in README.md Auto-merging README.md CONFLICT (add/add): Merge conflict in Makefile Auto-merging Makefile CONFLICT (add/add): Merge conflict in .github/workflows/setup.yaml Auto-merging .github/workflows/setup.yaml CONFLICT (add/add): Merge conflict in .github/workflows/ci.yaml Auto-merging .github/workflows/ci.yaml Automatic merge failed; fix conflicts and then commit the result. . 第五步 . 显示冲突文件 参考 List conflicted files in git . git diff --name-only --diff-filter=U .github/workflows/ci.yaml .github/workflows/setup.yaml Makefile README.md _action_files/action_entrypoint.sh _action_files/nb2post.py _action_files/settings.ini _config.yml _includes/favicons.html _includes/notebook_colab_link.html _includes/notebook_github_link.html _includes/twitter.html _includes/youtube.html _notebooks/2020-02-20-test.ipynb _posts/2020-01-14-test-markdown-post.md assets/js/search.js assets/main.scss index.md . 第六步 . 用你擅长的方式解决冲突 . 第七步 . 合并并提交更新 . git add . git commit -m &quot; commit message comes here &quot; .",
            "url": "https://invisprints.github.io/blog/fastpages/2020/04/08/fastpages-upgrade.html",
            "relUrl": "/fastpages/2020/04/08/fastpages-upgrade.html",
            "date": " • Apr 8, 2020"
        }
        
    
  
    
        ,"post3": {
            "title": "fastpages 介绍 & 搭建教程",
            "content": ". 本文参考Introducing fastpages，并从中节选部分转述成中文。感谢 Jeremy Howard 和 Hamel Husain 的辛苦付出！ . fastpages 是一个能让你在 GitHub 上创建免费博客的平台，它没有广告且附带许多其它实用功能。 . 能直接将Jupyter Notebooks转换成博文，包含输入和输出代码，且输出代码可以是可交互的。可以查看 Scott Hawley 写的这篇范例博文以了解详情。fastpages支持Notebook的如下特性： Altair创建的交互可视化图形 | 隐藏或显示输入输出代码 | 折叠code cell | 通过markdown格式定义文章标题、摘要和其它元信息 | 跳转到 Colab 和 GitHub 的标签栏 | . | 转换 Microsoft Word 到博文 | 使用GitHub内置的markdown编辑器在线创建或编辑 Markdown 博文 | 内嵌 Twitter 卡片和 YouTube 视频 | 供分类查找的标签系统 | 更多…… | . fastpages 依赖 Github pages 托管和 Github Actions 搭建自动搭建博客平台。通常初始化只需数分钟，并不需要相应的专业知识。对于普通人员，你只需将你的Jupyter notebook, Word 文档或者 markdown 文件保存在相应目录即可，剩下的就由 fastpages 帮你自动完成。这篇文章就是由 Jupyter Notebook 编写而成，你可以点击博文开头的 View on GitHub 查看 . Fastpages &#25645;&#24314;&#65288;&#21021;&#22987;&#21270;&#65289; . fastpages初始化过程 基本由 GitHub Actions 自动完成。你只需在fastpages github上点击 use this temple。在模版建立完成后，大约 30s 就会出现一条 pull requests。按照上面的提示配置你的博客。自动生成的 pull request 长下面这样，上面有英文指导步骤，一步一步按着做即可。 . . 你只需要按部就班完成 pull request 上要求的操作，等待不到半小时即可拥有你自己的博客平台。整个初始化过程不到一小时。 . 下面参考Jupyter 博文发布教程和Markdown 博文发布教程开始你的第一篇博文吧！ .",
            "url": "https://invisprints.github.io/blog/fastpages/jupyter/2020/04/07/introducing-fastpages.html",
            "relUrl": "/fastpages/jupyter/2020/04/07/introducing-fastpages.html",
            "date": " • Apr 7, 2020"
        }
        
    
  
    
        ,"post4": {
            "title": "Jupyter 博文发布教程",
            "content": "&#22522;&#26412;&#35774;&#32622; . fastpages 会将存放在 _notebooks 中的 jupyter notebook 自动转换成博文，因此你应该将所有的 jupyter notebook 放在该文件夹下。 . fastpages 会将存放在 _post 文件夹内的 markdown 文章和 _word 中的 word 文章自动转换成博文。因此你的博文应该存放在这三个文件夹内。 . 所有的博文遵循同一套命名规范，即 YYYY-MM-DD-filename.ext，如本篇 notebook 教程的文件名为 2020-04-04-jupyter-tutorial.ipynb . FrontMatter . FrontMatter 位于每篇 notebook 中的第一个 cell 中，其作用是每篇博文的配置文件，它控制着每篇博文该如何展现内容。 . markdown # Title &gt; Awesome summary - toc:true- branch: master - badges: true - comments: true - author: Hamel Husain &amp; Jeremy Howard - categories: [fastpages, jupyter] . 有关 FrontMatter 的详细配置和说明可以参考 fastpages 说明 . &#26684;&#24335; . 本文仅介绍 fapages 中的一些亮点功能，关于 jupyter notebook 的使用请自行寻找相关教程 . 在 cell 开头如果加上 #hide ，fastpages 会隐藏该 cell 的输入和输出 . 在 cell 开头如果加上 #hide_input ，fastpages 会隐藏该 cell 的输入 . 在 cell 开头如果加上 #collapse-hide ，fastpages会默认折叠该细胞，但可以手动展开 . 在 cell 开头如果加上 #collapse-show ，fastpages会默认展开该细胞，但可以手动折叠 . #collapse-hide import pandas as pd import plotly.express as px # from IPython.display import HTML import chart_studio.plotly as py . . #collapse-show cars = &#39;https://vega.github.io/vega-datasets/data/cars.json&#39; movies = &#39;https://vega.github.io/vega-datasets/data/movies.json&#39; sp500 = &#39;https://vega.github.io/vega-datasets/data/sp500.csv&#39; stocks = &#39;https://vega.github.io/vega-datasets/data/stocks.csv&#39; flights = &#39;https://vega.github.io/vega-datasets/data/flights-5k.json&#39; . . &#21487;&#35270;&#21270;&#26174;&#31034; . 在 fastpages 官网 中介绍了如何用 Altair 显示可交互图表的操作， 其实不只 Altair， fastapages 支持多种可视化框架。 需要注意的是，在最后显示阶段需要用 HTML(fig.to_html()) 代替平常 fig.show() . plotly . print(px.data.iris.__doc__) px.data.iris().head() . Each row represents a flower. https://en.wikipedia.org/wiki/Iris_flower_data_set Returns: A `pandas.DataFrame` with 150 rows and the following columns: `[&#39;sepal_length&#39;, &#39;sepal_width&#39;, &#39;petal_length&#39;, &#39;petal_width&#39;, &#39;species&#39;, &#39;species_id&#39;]`. . sepal_length sepal_width petal_length petal_width species species_id . 0 5.1 | 3.5 | 1.4 | 0.2 | setosa | 1 | . 1 4.9 | 3.0 | 1.4 | 0.2 | setosa | 1 | . 2 4.7 | 3.2 | 1.3 | 0.2 | setosa | 1 | . 3 4.6 | 3.1 | 1.5 | 0.2 | setosa | 1 | . 4 5.0 | 3.6 | 1.4 | 0.2 | setosa | 1 | . df = px.data.iris() fig = px.scatter(df, x=&quot;sepal_width&quot;, y=&quot;sepal_length&quot;, color=&quot;species&quot;, marginal_y=&quot;rug&quot;, marginal_x=&quot;histogram&quot;) # HTML(fig.to_html()) py.iplot(fig, filename=&quot;tutorial-histogram&quot;) . df = px.data.gapminder() fig = px.scatter(df, x=&quot;gdpPercap&quot;, y=&quot;lifeExp&quot;, animation_frame=&quot;year&quot;, animation_group=&quot;country&quot;, size=&quot;pop&quot;, color=&quot;continent&quot;, hover_name=&quot;country&quot;, facet_col=&quot;continent&quot;, log_x=True, size_max=45, range_x=[100,100000], range_y=[25,90]) # HTML(fig.to_html()) py.iplot(fig, filename=&quot;tutorial-sactter&quot;) . df = px.data.election() fig = px.line_3d(df, x=&quot;Joly&quot;, y=&quot;Coderre&quot;, z=&quot;Bergeron&quot;, color=&quot;winner&quot;, line_dash=&quot;winner&quot;) # HTML(fig.to_html()) py.iplot(fig, filename=&quot;tutorial-line-3d&quot;) . &#22270;&#29255; . 可以用类似 markdown 格式载入本地或远程图片 . ![](my_icons/fastai_logo.png) . . ![](https://image.flaticon.com/icons/svg/36/36686.svg) . . GIF &#22270;&#20687; . ![](https://upload.wikimedia.org/wikipedia/commons/7/71/ChessPawnSpecialMoves.gif) . . &#22270;&#27880; . 采用以下格式显示图注 . ![](https://www.fast.ai/images/fastai_paper/show_batch.png &quot;Credit: https://www.fast.ai/2020/02/13/fastai-A-Layered-API-for-Deep-Learning/&quot;) . . &#20854;&#23427;&#20142;&#28857; . Tweet &#21345;&#29255; . 输入 &gt; twitter: https://twitter.com/jakevdp/status/1204765621767901185?s=20 显示如下信息 Altair 4.0 is released! https://t.co/PCyrIOTcvvTry it with: pip install -U altairThe full list of changes is at https://t.co/roXmzcsT58 ...read on for some highlights. pic.twitter.com/vWJ0ZveKbZ . &mdash; Jake VanderPlas (@jakevdp) December 11, 2019 . Youtube &#35270;&#39057; . 输入 &gt; youtube: https://youtu.be/XfoYk_Z5AkI 显示如下信息 . Callouts . 输入 &gt; Warning: There will be no second warning! 显示如下信息 . Warning: There will be no second warning! . 输入 &gt; Important: Pay attention! It&#39;s important. 显示如下信息 . Important: Pay attention! It&#8217;s important. . 输入 &gt; Tip: This is my tip. 显示如下信息 . Tip: This is my tip. . 输入 &gt; Note: Take note of this. 显示如下信息 . Note: Take note of this. . &#33050;&#27880; . jupyter notebook 中脚注与 markdown 中的脚注有所区别，详细参见这篇文章 This guide provides more detail about this syntax . For example, here is a footnote {% fn 1 %}. And another {% fn 2 %} {{ &#39;This is the footnote.&#39; | fndetail: 1 }} {{ &#39;This is the other footnote. You can even have a [link](www.github.com)!&#39; | fndetail: 2 }} . For example, here is a footnote 1. . And another 2 . 1. This is the footnote.↩ . 2. This is the other footnote. You can even have a link!↩ .",
            "url": "https://invisprints.github.io/blog/jupyter/fastpages/2020/04/05/jupyter-tutorial.html",
            "relUrl": "/jupyter/fastpages/2020/04/05/jupyter-tutorial.html",
            "date": " • Apr 5, 2020"
        }
        
    
  
    
        ,"post5": {
            "title": "markdown 博文发布教程",
            "content": "基本设置 . fastpages 会将存放在 _post 文件夹内的 markdown 文章自动转换成博文，因此你应该将所有的markdown博文放在该文件夹下。 . fastpages 也会将存放在 _notebooks 中的 jupyter notebook 和 _word 中的 word 文章自动转换成博文。因此你的博文应该存放在这三个文件夹内。 . 所有的博文遵循同一套命名规范，即 YYYY-MM-DD-filename.ext，如本篇 markdown 教程的文件名为 2020-04-04-markdown-tutorial.md . 格式 . markdown 文章格式遵从 markdown 格式，如不了解，请自行搜索相关内容。 . . . 以下内容引用自MWeb 标题 . Markdown 语法： . # 第一级标题 `&lt;h1&gt;` ## 第二级标题 `&lt;h2&gt;` ###### 第六级标题 `&lt;h6&gt;` . 效果如下： . 第一级标题 &lt;h1&gt; . 第二级标题 &lt;h2&gt; . 第六级标题 &lt;h6&gt; . 强调 . Markdown 语法： . *这些文字会生成`&lt;em&gt;`* _这些文字会生成`&lt;u&gt;`_ **这些文字会生成`&lt;strong&gt;`** __这些文字会生成`&lt;strong&gt;`__ . 效果如下： . 这些文字会生成&lt;em&gt; 这些文字会生成&lt;u&gt; . 这些文字会生成&lt;strong&gt; 这些文字会生成&lt;strong&gt; . 换行 . 四个及以上空格加回车。 . 列表 . 无序列表 . Markdown 语法： . * 项目一 无序列表 `* + 空格键` * 项目二 * 项目二的子项目一 无序列表 `TAB + * + 空格键` * 项目二的子项目二 . 效果如下： . 项目一 无序列表 * + 空格键 | 项目二 | 项目二的子项目一 无序列表 TAB + * + 空格键 | 项目二的子项目二 | . 有序列表 . Markdown 语法： . 1. 项目一 有序列表 `数字 + . + 空格键` 2. 项目二 3. 项目三 1. 项目三的子项目一 有序列表 `TAB + 数字 + . + 空格键` 2. 项目三的子项目二 . 效果如下： . 项目一 有序列表 数字 + . + 空格键 | 项目二 | 项目三 项目三的子项目一 有序列表 TAB + 数字 + . + 空格键 | 项目三的子项目二 | | 任务列表（Task lists） . Markdown 语法： . - [ ] 任务一 未做任务 `- + 空格 + [ ]` - [x] 任务二 已做任务 `- + 空格 + [x]` . 效果如下： . 任务一 未做任务 - + 空格 + [ ] | 任务二 已做任务 - + 空格 + [x] | . 图片 . Markdown 语法： . ![GitHub set up](http://zh.mweb.im/asset/img/set-up-git.gif) 格式: ![Alt Text](url) . 效果如下： . . 链接 . Markdown 语法： . email &lt;example@example.com&gt; [GitHub](http://github.com) 自动生成连接 &lt;http://www.github.com/&gt; . 效果如下： . Email 连接： example@example.com 连接标题Github网站 自动生成连接像： http://www.github.com/ 这样 . 区块引用 . Markdown 语法： . 某某说: &gt; 第一行引用 &gt; 第二行费用文字 . 效果如下： . 某某说: . 第一行引用 第二行费用文字 . 行内代码 . Markdown 语法： . 像这样即可：`&lt;addr&gt;` `code` . 效果如下： . 像这样即可：&lt;addr&gt; code . 多行或者一段代码 . Markdown 语法： . js function fancyAlert(arg) { if(arg) { $.facebox({div:&#39;#foo&#39;}) } } . 效果如下： . function fancyAlert(arg) { if(arg) { $.facebox({div:&#39;#foo&#39;}) } } . 表格 . Markdown 语法： . 第一格表头 | 第二格表头 | - 内容单元格 第一列第一格 | 内容单元格第二列第一格 内容单元格 第一列第二格 多加文字 | 内容单元格第二列第二格 . 效果如下： . 第一格表头 第二格表头 . 内容单元格 第一列第一格 | 内容单元格第二列第一格 | . 内容单元格 第一列第二格 多加文字 | 内容单元格第二列第二格 | . 删除线 . Markdown 语法： . 加删除线像这样用： 删除这些 . 效果如下： . 加删除线像这样用： 删除这些 . 分隔线 . 以下三种方式都可以生成分隔线： . *** ***** - - - . 效果如下： . . . . MathJax . Markdown 语法： . 块级公式： $$ x = frac{-b pm sqrt{b^2 - 4ac}}{2a} $$ [ frac{1}{ Bigl( sqrt{ phi sqrt{5}}- phi Bigr) e^{ frac25 pi}} = 1+ frac{e^{-2 pi}} {1+ frac{e^{-4 pi}} {1+ frac{e^{-6 pi}} {1+ frac{e^{-8 pi}} {1+ ldots} } } } ] 行内公式： $$ Gamma(n) = (n-1)! quad forall n in mathbb N$$ . 在 _config.yml 中设置 use_math: true 可开启渲染数学公式 . 块级公式： . x=−b±b2−4ac2ax = frac{-b pm sqrt{b^2 - 4ac}}{2a}x=2a−b±b2−4ac . ​​ . [ frac{1}{ Bigl( sqrt{ phi sqrt{5}}- phi Bigr) e^{ frac25 pi}} = 1+ frac{e^{-2 pi}} {1+ frac{e^{-4 pi}} {1+ frac{e^{-6 pi}} {1+ frac{e^{-8 pi}} {1+ ldots} } } } ] . 行内公式： Γ(n)=(n−1)!∀n∈N Gamma(n) = (n-1)! quad forall n in mathbb NΓ(n)=(n−1)!∀n∈N . . 在本地测试时可能会遇到数学公式渲染出错的情况 脚注（Footnote） . Markdown 语法： . 这是一个脚注：[^sample_footnote] . 效果如下： . 这是一个脚注：1 . . 以上内容引用自MWeb . 除了标准markdown格式，fastpages还允许你增添一些额外的内容。 . 图片与图注 . 如果你想显示本地图片，可将图片放入 images 文件夹中，然后用 /blog/images 表示图片路径，同时你可以仿照下面格式显示图注 . ![](/blog/images/logo.png &quot;fast.ai&#39;s logo&quot;) . . Tweet 卡片 . 请查看原md文档以了解如何使用该功能 . Altair 4.0 is released! https://t.co/PCyrIOTcvvTry it with: pip install -U altairThe full list of changes is at https://t.co/roXmzcsT58 ...read on for some highlights. pic.twitter.com/vWJ0ZveKbZ . &mdash; Jake VanderPlas (@jakevdp) December 11, 2019 Boxes / Callouts . 请查看原md文档以了解如何使用该功能 . . You can include alert boxes . You can include info boxes FrontMatter . FrontMatter 相当于每篇博文的配置文件，它控制着每篇博文该如何展现内容。 在 markdown 博文中，我们会将 FrontMatter 写在文章的开头 . title: &quot;My Title&quot; summary: &quot;Awesome summary&quot; toc: false comments: true image: images/some_folder/your_image.png hide: false search_exclude: true categories: [fastpages, jupyter] metadata_key1: metadata_value1 metadata_key2: metadata_value2 . FrontMatter允许用户自定义额外选项，但必须遵守YAML格式规则。 . 可以访问 fastpages 主页 了解更多内容 . 这里是脚注信息 &#8617; . |",
            "url": "https://invisprints.github.io/blog/markdown/fastpages/2020/04/04/markdown-tutorial.html",
            "relUrl": "/markdown/fastpages/2020/04/04/markdown-tutorial.html",
            "date": " • Apr 4, 2020"
        }
        
    
  
    
        ,"post6": {
            "title": "Fastpages Notebook Blog Post",
            "content": "About . This notebook is a demonstration of some of capabilities of fastpages with notebooks. . With fastpages you can save your jupyter notebooks into the _notebooks folder at the root of your repository, and they will be automatically be converted to Jekyll compliant blog posts! . Front Matter . The first cell in your Jupyter Notebook or markdown blog post contains front matter. Front matter is metadata that can turn on/off options in your Notebook. It is formatted like this: . # Title &gt; Awesome summary - toc:true- branch: master- badges: true- comments: true - author: Hamel Husain &amp; Jeremy Howard - categories: [fastpages, jupyter] . Setting toc: true will automatically generate a table of contents | Setting badges: true will automatically include GitHub and Google Colab links to your notebook. | Setting comments: true will enable commenting on your blog post, powered by utterances. | . More details and options for front matter can be viewed on the front matter section of the README. . Markdown Shortcuts . A #hide comment at the top of any code cell will hide both the input and output of that cell in your blog post. . A #hide_input comment at the top of any code cell will only hide the input of that cell. . The comment #hide_input was used to hide the code that produced this. . put a #collapse-hide flag at the top of any cell if you want to hide that cell by default, but give the reader the option to show it: . #collapse-hide import pandas as pd import altair as alt . . put a #collapse-show flag at the top of any cell if you want to show that cell by default, but give the reader the option to hide it: . #collapse-show cars = &#39;https://vega.github.io/vega-datasets/data/cars.json&#39; movies = &#39;https://vega.github.io/vega-datasets/data/movies.json&#39; sp500 = &#39;https://vega.github.io/vega-datasets/data/sp500.csv&#39; stocks = &#39;https://vega.github.io/vega-datasets/data/stocks.csv&#39; flights = &#39;https://vega.github.io/vega-datasets/data/flights-5k.json&#39; . . Interactive Charts With Altair . Charts made with Altair remain interactive. Example charts taken from this repo, specifically this notebook. . Example 1: DropDown . # single-value selection over [Major_Genre, MPAA_Rating] pairs # use specific hard-wired values as the initial selected values selection = alt.selection_single( name=&#39;Select&#39;, fields=[&#39;Major_Genre&#39;, &#39;MPAA_Rating&#39;], init={&#39;Major_Genre&#39;: &#39;Drama&#39;, &#39;MPAA_Rating&#39;: &#39;R&#39;}, bind={&#39;Major_Genre&#39;: alt.binding_select(options=genres), &#39;MPAA_Rating&#39;: alt.binding_radio(options=mpaa)} ) # scatter plot, modify opacity based on selection alt.Chart(movies).mark_circle().add_selection( selection ).encode( x=&#39;Rotten_Tomatoes_Rating:Q&#39;, y=&#39;IMDB_Rating:Q&#39;, tooltip=&#39;Title:N&#39;, opacity=alt.condition(selection, alt.value(0.75), alt.value(0.05)) ) . Example 2: Tooltips . alt.Chart(movies).mark_circle().add_selection( alt.selection_interval(bind=&#39;scales&#39;, encodings=[&#39;x&#39;]) ).encode( x=&#39;Rotten_Tomatoes_Rating:Q&#39;, y=alt.Y(&#39;IMDB_Rating:Q&#39;, axis=alt.Axis(minExtent=30)), # use min extent to stabilize axis title placement tooltip=[&#39;Title:N&#39;, &#39;Release_Date:N&#39;, &#39;IMDB_Rating:Q&#39;, &#39;Rotten_Tomatoes_Rating:Q&#39;] ).properties( width=600, height=400 ) . Example 3: More Tooltips . # select a point for which to provide details-on-demand label = alt.selection_single( encodings=[&#39;x&#39;], # limit selection to x-axis value on=&#39;mouseover&#39;, # select on mouseover events nearest=True, # select data point nearest the cursor empty=&#39;none&#39; # empty selection includes no data points ) # define our base line chart of stock prices base = alt.Chart().mark_line().encode( alt.X(&#39;date:T&#39;), alt.Y(&#39;price:Q&#39;, scale=alt.Scale(type=&#39;log&#39;)), alt.Color(&#39;symbol:N&#39;) ) alt.layer( base, # base line chart # add a rule mark to serve as a guide line alt.Chart().mark_rule(color=&#39;#aaa&#39;).encode( x=&#39;date:T&#39; ).transform_filter(label), # add circle marks for selected time points, hide unselected points base.mark_circle().encode( opacity=alt.condition(label, alt.value(1), alt.value(0)) ).add_selection(label), # add white stroked text to provide a legible background for labels base.mark_text(align=&#39;left&#39;, dx=5, dy=-5, stroke=&#39;white&#39;, strokeWidth=2).encode( text=&#39;price:Q&#39; ).transform_filter(label), # add text labels for stock prices base.mark_text(align=&#39;left&#39;, dx=5, dy=-5).encode( text=&#39;price:Q&#39; ).transform_filter(label), data=stocks ).properties( width=700, height=400 ) . Data Tables . You can display tables per the usual way in your blog: . movies = &#39;https://vega.github.io/vega-datasets/data/movies.json&#39; df = pd.read_json(movies) # display table with pandas df[[&#39;Title&#39;, &#39;Worldwide_Gross&#39;, &#39;Production_Budget&#39;, &#39;Distributor&#39;, &#39;MPAA_Rating&#39;, &#39;IMDB_Rating&#39;, &#39;Rotten_Tomatoes_Rating&#39;]].head() . Title Worldwide_Gross Production_Budget Distributor MPAA_Rating IMDB_Rating Rotten_Tomatoes_Rating . 0 The Land Girls | 146083.0 | 8000000.0 | Gramercy | R | 6.1 | NaN | . 1 First Love, Last Rites | 10876.0 | 300000.0 | Strand | R | 6.9 | NaN | . 2 I Married a Strange Person | 203134.0 | 250000.0 | Lionsgate | None | 6.8 | NaN | . 3 Let&#39;s Talk About Sex | 373615.0 | 300000.0 | Fine Line | None | NaN | 13.0 | . 4 Slam | 1087521.0 | 1000000.0 | Trimark | R | 3.4 | 62.0 | . Images . Local Images . You can reference local images and they will be copied and rendered on your blog automatically. You can include these with the following markdown syntax: . ![](my_icons/fastai_logo.png) . . Remote Images . Remote images can be included with the following markdown syntax: . ![](https://image.flaticon.com/icons/svg/36/36686.svg) . . Animated Gifs . Animated Gifs work, too! . ![](https://upload.wikimedia.org/wikipedia/commons/7/71/ChessPawnSpecialMoves.gif) . . Captions . You can include captions with markdown images like this: . ![](https://www.fast.ai/images/fastai_paper/show_batch.png &quot;Credit: https://www.fast.ai/2020/02/13/fastai-A-Layered-API-for-Deep-Learning/&quot;) . . Other Elements . Tweetcards . Typing &gt; twitter: https://twitter.com/jakevdp/status/1204765621767901185?s=20 will render this: Altair 4.0 is released! https://t.co/PCyrIOTcvvTry it with: pip install -U altairThe full list of changes is at https://t.co/roXmzcsT58 ...read on for some highlights. pic.twitter.com/vWJ0ZveKbZ . &mdash; Jake VanderPlas (@jakevdp) December 11, 2019 . Youtube Videos . Typing &gt; youtube: https://youtu.be/XfoYk_Z5AkI will render this: . Boxes / Callouts . Typing &gt; Warning: There will be no second warning! will render this: . Warning: There will be no second warning! . Typing &gt; Important: Pay attention! It&#39;s important. will render this: . Important: Pay attention! It&#8217;s important. . Typing &gt; Tip: This is my tip. will render this: . Tip: This is my tip. . Typing &gt; Note: Take note of this. will render this: . Note: Take note of this. . Typing &gt; Note: A doc link to [an example website: fast.ai](https://www.fast.ai/) should also work fine. will render in the docs: . Note: A doc link to an example website: fast.ai should also work fine. . Footnotes . You can have footnotes in notebooks, however the syntax is different compared to markdown documents. This guide provides more detail about this syntax, which looks like this: . For example, here is a footnote {% fn 1 %}. And another {% fn 2 %} {{ &#39;This is the footnote.&#39; | fndetail: 1 }} {{ &#39;This is the other footnote. You can even have a [link](www.github.com)!&#39; | fndetail: 2 }} . For example, here is a footnote 1. . And another 2 . 1. This is the footnote.↩ . 2. This is the other footnote. You can even have a link!↩ .",
            "url": "https://invisprints.github.io/blog/jupyter/2020/02/20/test.html",
            "relUrl": "/jupyter/2020/02/20/test.html",
            "date": " • Feb 20, 2020"
        }
        
    
  
    
        ,"post7": {
            "title": "An Example Markdown Post",
            "content": "Example Markdown Post . Basic setup . Jekyll requires blog post files to be named according to the following format: . YEAR-MONTH-DAY-filename.md . Where YEAR is a four-digit number, MONTH and DAY are both two-digit numbers, and filename is whatever file name you choose, to remind yourself what this post is about. .md is the file extension for markdown files. . The first line of the file should start with a single hash character, then a space, then your title. This is how you create a “level 1 heading” in markdown. Then you can create level 2, 3, etc headings as you wish but repeating the hash character, such as you see in the line ## File names above. . Basic formatting . You can use italics, bold, code font text, and create links. Here’s a footnote 1. Here’s a horizontal rule: . . Lists . Here’s a list: . item 1 | item 2 | . And a numbered list: . item 1 | item 2 | Boxes and stuff . This is a quotation . . You can include alert boxes …and… . . You can include info boxes Images . . Code . You can format text and code per usual . General preformatted text: . # Do a thing do_thing() . Python code and output: . # Prints &#39;2&#39; print(1+1) . 2 . Formatting text as shell commands: . echo &quot;hello world&quot; ./some_script.sh --option &quot;value&quot; wget https://example.com/cat_photo1.png . Formatting text as YAML: . key: value - another_key: &quot;another value&quot; . Tables . Column 1 Column 2 . A thing | Another thing | . Tweetcards . Altair 4.0 is released! https://t.co/PCyrIOTcvvTry it with: pip install -U altairThe full list of changes is at https://t.co/roXmzcsT58 ...read on for some highlights. pic.twitter.com/vWJ0ZveKbZ . &mdash; Jake VanderPlas (@jakevdp) December 11, 2019 Footnotes . This is the footnote. &#8617; . |",
            "url": "https://invisprints.github.io/blog/markdown/2020/01/14/test-markdown-post.html",
            "relUrl": "/markdown/2020/01/14/test-markdown-post.html",
            "date": " • Jan 14, 2020"
        }
        
    
  

  
  

  
      ,"page1": {
          "title": "🥳About Me",
          "content": "研究生·深度学习&amp;NAS·Fastai·二次元·沉迷研究各种无用工具和学习方法 .",
          "url": "https://invisprints.github.io/blog/about/",
          "relUrl": "/about/",
          "date": ""
      }
      
  

  

  
  

  

  
  

  

  
  

  
  

  
  

  
      ,"page10": {
          "title": "",
          "content": "Sitemap: {{ “sitemap.xml” | absolute_url }} | .",
          "url": "https://invisprints.github.io/blog/robots.txt",
          "relUrl": "/robots.txt",
          "date": ""
      }
      
  

}